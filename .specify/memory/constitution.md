<!--
==================== 同期影響レポート ====================
バージョン変更: 1.0.0 → 2.0.0（MAJOR: 原則の削除・再定義）
変更された原則:
  - 1.4 テストコード不要 → 削除
  - 1.4 テスト規律 → 新規追加（Unitテスト・E2Eテスト必須化）
追加されたセクション:
  - 3. 品質ゲート（新規）
削除されたセクション: なし
更新が必要なテンプレート:
  - .specify/templates/plan-template.md ✅ 確認済み（変更不要）
  - .specify/templates/spec-template.md ✅ 確認済み（変更不要）
  - .specify/templates/tasks-template.md ✅ 確認済み（変更不要）
フォローアップTODO: なし
======================================================
-->

# 憲章

| 項目 | 値 |
|------|-----|
| **プロジェクト名** | speckit-ja |
| **バージョン** | 2.0.0 |
| **承認日** | 2026-02-03 |
| **最終修正日** | 2026-02-03 |

## 📋 目次

- [1. コアプリンシプル](#-1-コアプリンシプル)
  - [1.1 クリーンコード](#11-クリーンコード)
  - [1.2 シンプルなUX](#12-シンプルなux)
  - [1.3 レスポンシブデザイン](#13-レスポンシブデザイン)
  - [1.4 テスト規律](#14-テスト規律)
- [2. 技術スタック](#-2-技術スタック)
- [3. 品質ゲート](#-3-品質ゲート)
- [4. 命名規則](#-4-命名規則)
- [5. ガバナンス](#-5-ガバナンス)

## 🎯 1. コアプリンシプル

### 1.1 クリーンコード

保守性の高いコードを記述する。

- **可読性**: コードは読みやすく、意図が明確でなければならない
- **シンプルさ**: 複雑な実装より単純な解決策を優先する
- **一貫性**: コードスタイルとパターンは一貫して適用する
- **関心の分離**: 各コンポーネント・関数は単一の責務を持つ
- **DRY原則**: 重複コードを避け、再利用可能なコンポーネントを作成する

**根拠**: 保守性の高いコードは長期的な開発効率を向上させ、バグの発生を抑制する。

### 1.2 シンプルなUX

ユーザー体験はシンプルで直感的でなければならない。

- **直感的なナビゲーション**: ユーザーが迷わずに目的を達成できる
- **最小限の操作**: 目的達成に必要なクリック・入力数を最小化する
- **明確なフィードバック**: ユーザーアクションに対して即座に視覚的フィードバックを提供する
- **一貫したUI**: デザインパターンとインタラクションは全画面で統一する

**根拠**: 複雑なUIはユーザー離脱を招く。シンプルさが最高のUXである。

### 1.3 レスポンシブデザイン

すべての画面サイズ（デスクトップ、タブレット、モバイル）に対応する。

- **モバイルファースト**: モバイル表示を基準に設計し、大画面に拡張する
- **Tailwind CSSのブレークポイント**: `sm`, `md`, `lg`, `xl`, `2xl` を活用する
- **タッチフレンドリー**: タップターゲットは最小44x44pxを確保する
- **フレキシブルレイアウト**: 固定幅を避け、相対単位・Grid・Flexboxを使用する

**根拠**: モバイルデバイスからのアクセスは増加し続けている。レスポンシブ対応は必須要件である。

### 1.4 テスト規律

品質を担保するためのテスト戦略を定義する。

- **Unitテスト（必須）**: ビジネスロジック、ユーティリティ関数、カスタムフックをテストする
  - 対象: `src/lib/`、`src/hooks/`、純粋関数
  - テストフレームワーク: Vitest
  - ファイル命名: `*.test.ts`, `*.test.tsx`
- **E2Eテスト（必須）**: 主要なユーザー導線をテストする
  - 対象: CRUD操作、フィルタリング、永続化など主要機能
  - テストフレームワーク: Playwright
  - ファイル命名: `*.spec.ts`
- **テストカバレッジ**: 重要なビジネスロジックは80%以上のカバレッジを目標とする

**根拠**: 自動テストはリグレッションを防ぎ、リファクタリングの安全性を確保する。
Unitテストはロジックの正確性を、E2Eテストはユーザー体験の一貫性を担保する。

## 🛠️ 2. 技術スタック

本プロジェクトで使用する技術スタックを定義する。

| カテゴリ | 技術 | 備考 |
|---------|------|------|
| **フレームワーク** | Next.js | App Router推奨 |
| **UIライブラリ** | React | Next.jsに含まれる |
| **スタイリング** | Tailwind CSS | ユーティリティファースト |
| **UIコンポーネント** | shadcn/ui | Radix UIベース |
| **Unitテスト** | Vitest | 高速なユニットテスト |
| **E2Eテスト** | Playwright | ブラウザ自動化 |
| **型チェック** | TypeScript | 静的型付け |
| **リンター** | ESLint | コード品質チェック |
| **フォーマッター** | Prettier | コードフォーマット |

### 技術選定の原則

- **公式ドキュメントに従う**: 各技術の公式ベストプラクティスを遵守する
- **最新安定版を使用**: セキュリティとパフォーマンスのため最新の安定版を採用する
- **依存関係の最小化**: 必要最小限のライブラリのみ追加する

## ✅ 3. 品質ゲート

マージ前に以下のすべてのチェックに合格することを必須とする。
いずれかが失敗した場合、PRはマージできない。

### 3.1 自動チェック（CI必須）

| チェック項目 | コマンド | 失敗時の対応 |
|-------------|---------|-------------|
| **型チェック** | `npm run type-check` | 型エラーをすべて解消する |
| **リント** | `npm run lint` | ESLintエラーをすべて解消する |
| **フォーマット** | `npm run format:check` | `npm run format` で自動修正する |
| **Unitテスト** | `npm run test` | 失敗テストを修正する |
| **E2Eテスト** | `npm run test:e2e` | 失敗テストを修正する |

### 3.2 実行順序（推奨）

1. `npm run format` - コードフォーマットを適用
2. `npm run lint` - リントエラーを確認・修正
3. `npm run type-check` - 型エラーを確認・修正
4. `npm run test` - Unitテストを実行
5. `npm run test:e2e` - E2Eテストを実行

### 3.3 コミット前チェック

以下のコマンドですべてのチェックを一括実行できる:

```bash
npm run check-all
```

または個別に実行する場合:

```bash
npm run format && npm run lint && npm run type-check && npm run test && npm run test:e2e
```

**根拠**: 自動化された品質ゲートにより、コードベースの一貫性と品質を維持する。
人的ミスを防ぎ、レビュー負荷を軽減する。

## 📛 4. 命名規則

ファイルとディレクトリの命名規則を定義する。

### ファイル命名

| 種類 | 規則 | 例 |
|------|------|-----|
| **コンポーネント** | kebab-case | `user-profile.tsx`, `nav-bar.tsx` |
| **ページ** | kebab-case | `about-us/page.tsx` |
| **ユーティリティ** | kebab-case | `format-date.ts`, `api-client.ts` |
| **型定義** | kebab-case | `user-types.ts` |
| **設定ファイル** | kebab-case | `tailwind.config.ts` |
| **Unitテスト** | kebab-case + `.test` | `validation.test.ts`, `use-todos.test.ts` |
| **E2Eテスト** | kebab-case + `.spec` | `todo-crud.spec.ts`, `todo-filter.spec.ts` |

### ディレクトリ命名

- すべてのディレクトリはkebab-caseを使用する
- 例: `user-settings/`, `api-routes/`, `shared-components/`
- テストディレクトリ: `tests/unit/`, `tests/e2e/`

### コード内の命名

| 種類 | 規則 | 例 |
|------|------|-----|
| **コンポーネント名** | PascalCase | `UserProfile`, `NavBar` |
| **関数名** | camelCase | `formatDate`, `fetchUser` |
| **変数名** | camelCase | `userName`, `isLoading` |
| **定数** | SCREAMING_SNAKE_CASE | `MAX_ITEMS`, `API_URL` |
| **型/インターフェース** | PascalCase | `User`, `ApiResponse` |
| **テスト関数** | describe/it形式 | `describe('Todo')`, `it('should create')` |

## ⚖️ 5. ガバナンス

この憲章はプロジェクトのすべての開発プラクティスに優先する。

### 修正手続き

1. **提案**: 憲章の変更を提案する際は、変更理由と影響範囲を明記する
2. **レビュー**: 変更はプロジェクトメンバーによるレビューを経る
3. **承認**: 承認後、`LAST_AMENDED_DATE` と `CONSTITUTION_VERSION` を更新する
4. **伝播**: 変更は関連するすべてのドキュメント・テンプレートに反映する

### バージョニングポリシー

セマンティックバージョニング（MAJOR.MINOR.PATCH）に従う。

- **MAJOR**: 原則の削除・再定義など後方互換性のない変更
- **MINOR**: 新しい原則・セクションの追加、実質的なガイダンス拡張
- **PATCH**: 明確化、言い回し修正、タイポ修正

### コンプライアンス確認

- すべてのPRは本憲章への準拠を確認する
- 憲章に反するコードはレビューで指摘し、修正を求める
- 複雑性の増加には正当な理由が必要
- 品質ゲート（§3）のすべてのチェックに合格すること

### `/speckit.constitution` 実行時の更新範囲

`/speckit.constitution` コマンドによる更新は以下のディレクトリに限定される:

- `.specify/*` - SpecKitのテンプレート・メモリ・設定ファイル
- `.github/agents/*` - エージェント定義ファイル
- `.github/prompts/*` - プロンプト定義ファイル

**注意**: 上記以外のファイル（`src/`、`tests/`、`package.json` 等）は
このコマンドでは更新しない。
